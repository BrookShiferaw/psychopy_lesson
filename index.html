<!DOCTYPE html><html>

<head>
<meta charset="utf-8">
<title>Loops_Lesson</title>
<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>
<style type="text/css">
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>
</head>
<body>
<p><img src="./psychopyDocBanner2.gif" alt="Paradigm structure"></p>

<h2 id="toc_0">Welcome to Psychopy 101</h2>

<p>Psychopy is a free software package written in the Python programming language for creating and running cognitive/psychophysics experiments.  This introductory class is aimed at beginners and does not require any programming experience.</p>

<h2 id="toc_1">Setting up</h2>

<h2 id="toc_2">Looping through conditions</h2>

<p>Now that we have our movie structure:</p>

<p><img src="./gui_shots/Flow.png" alt="Paradigm structure"></p>

<p>We can add the movie&#39;s scene components.</p>

<p>Click on <em>Stimulus</em> in the <strong>Flow</strong> to open the scene, then click <img src="./gui_shots/image.png" alt="Drawing" style="width: 30px;"/> in the <strong>Components</strong> panel.<br>
A box pops up with several options for the image. Notice the default duration of an image is 1 second.</p>

<p>In the <em>Image</em> dialoge box, we need tell <em>Psychopy</em> where to look for this component of the scene.<br>
In your <em>Psychopy</em> folder, there is a subdirectory called <em>&#39;images&#39;</em>. This subdirectory holds images that can be used in for this scene. Lets use the cat_eyes.jpeg file. In the <em>Image</em> dialoge box, enter the path to the file like so:<br>
<img src="./gui_shots/image_path1.png" alt="image path">
Click OK</p>

<p>We can test to see if this works by running the movie. Click the Run icon <img src="./gui_shots/run.png" alt="Drawing" style="width: 20px;"/> on the top right of the <em>Psychopy</em> window. Enter &#39;001&#39; as the participant number.</p>

<p>In your <em>Psychopy</em> directory, you will now see a <em>&#39;data&#39;</em> subdirectory with the data saved in the form of 001<u>filename</u>date.csv. We will discuss the contents of the .csv later.</p>

<p>The movie works, but usually there are many scenes in a movie, and in psychological experiments the scene is often repeated.</p>

<p>In the <strong>Flow</strong>, click the <em>Insert Loop</em> button.
Click the first dot immediately following <em>Stimulus</em> and the second dot immediately before it. A dialog box apears with several options. Name it &#39;trials&#39;, the stimulus will loop 5 times by default.<br>
Run <img src="./gui_shots/run.png" alt="Drawing" style="width: 20px;"/> the experiment again.</p>

<p>You will have noticed that there was only one presentation of the kitten scene, any idea why? The kitten scene was actually presented for 1 second, 5 times, but there was no gap between the scenes. </p>

<p>An interstimulus interval (ISI) is required to separate each scene. In the <strong>Components</strong> panel, click <em>Custom</em> then the <img src="./gui_shots/ISI_button.png" alt="Drawing" style="width: 30px;"/>. The default ISI is 0.5 seconds. Click OK, there is now a pink shaded area for 0.5 seconds.<br>
Put the ISI before the image by changing the start time of the <img src="./gui_shots/image.png" alt="Drawing" style="width: 30px;"/> to 0.5 and the duration to 1.0. 
<img src="./gui_shots/ISI.png" alt="image path">
Run <img src="./gui_shots/run.png" alt="Drawing" style="width: 20px;"/> the movie again.</p>

<p>So we have 5 scene presentations, but what about recording a response? Let&#39;s add a button press for reaction time and accuracy.<br>
Click on the <img src="./gui_shots/keyboard.png" alt="Drawing" style="width: 30px;"/> in the <strong>Components</strong> panel. There are several options again, type &#39;space&#39; into the <em>Allowed keys</em> box to indicate a response by spacebar press. Click OK and the key response appears in the workspace.</p>

<p>Click again on the <img src="./gui_shots/image.png" alt="Drawing" style="width: 30px;"/> in the scene, and change the duration of the image to 0. Now the picture will be presented until the spacebar is pressed.</p>

<p><img src="./gui_shots/stim_complete.png" alt="image path"></p>

<p>We now have instructions and a scene that flashes for 1 second 5 times, and we can record a response. Click <img src="./gui_shots/run.png" alt="Drawing" style="width: 20px;"/></p>

<p>Lets check out the data.</p>

<p>This is good, but we can also loop through different scenes. </p>

<p>Let&#39;s use a new example. Imagine that <em>Psychopy</em> is in the pizza delivery business.<br>
<em>Psychopy</em> needs to collect the pizza order and deliver it to the customer, then receive the money. <em>Psychopy</em> looks at the list of pizzas to be delivered, and delivers each in turn until there are no more. Similarly, <em>Psychopy</em> can collect an image from a list, deliver it to the participant, and then receives a response, continuing until the list is done.</p>

<p>This list can be saved to an excel spreadsheet. In your <em>images</em> subdirectory, there is a file called datafile.xlsx. This contains a ready-made list.</p>

<p><img src="./gui_shots/spreadsheet.png" alt="properties icon"></p>

<p>Like the path we entered to the kitten image earlier, the column <em>images</em> has a list of paths to images.<br>
There are additional columns in the spreadsheet, in the pizza example, these can be thought of as the drink and a dessert that accompany the pizza. The drink and dessert in each row are specific to the pizza in that row.</p>

<p>Lets set it up. In this example we will use images of gorillas, kittens and hedgehogs. The instructions are:</p>

<p><em>You will see pictures</em></p>

<p><em>Press left for gorillas</em><br>
<em>Press right for kittens</em><br>
<em>Press up for hedgehogs</em></p>

<p><em>Press spacebar to continue</em></p>

<p>Click on <em>Instructions</em> in the <strong>Flow</strong>, and select <img src="./gui_shots/text.png" alt="Drawing" style="width: 30px;"/>. Type the above into the <em>Text</em> box.</p>

<p>To tell <em>Psychopy</em> where to look for the datafile, click on <em>trials</em> in the <strong>Flow</strong> and select <em>Browse...</em>. Select the datafile.xlsx and hit OK. The path to the file is now in the dialog box, and below there will be a summary of what is included. In this spreadsheet there are 10 rows (conditions) with 3 columns (parameters) as shown below.</p>

<p><img src="./gui_shots/loop_prop.png" alt="properties icon"></p>

<p>Now, to tell <em>Psychopy</em> to deliver the images from this list, click on <em>Stimulus</em> in the <strong>Flow</strong>, and the <img src="./gui_shots/image.png" alt="Drawing" style="width: 30px;"/>. In the <em>Image</em> box, type &#39;$images&#39;. The $ tells <em>Psychopy</em> to look for the column called <em>images</em> in the excel spreadsheet. Change the associated dropdown box to <em>set every repeat</em>. The image Properties should look like this:<br>
<img src="./gui_shots/image_prop.png" alt="properties icon">
Click OK.</p>

<p>We now need to record the amount of money received following pizza delivery, or the button press recieved following the image delivery. Click the <img src="./gui_shots/keyboard.png" alt="Drawing" style="width: 30px;"/> and type &#39; &#39;left&#39;, &#39;right&#39;, &#39;up&#39; &#39; into <em>Allowed keys</em>. In the <em>Store</em> dropdown, select <em>first key</em>. Finally, click the box to <em>Store correct</em> and enter &#39;$correct_ ans&#39; in the <em>Correct answer</em> box. As with the image properties, this tells <em>PsychoPy</em> to look in the correct_ans column in the excel spreadsheet. Your Properties should resemble the image below.</p>

<p><img src="./gui_shots/cor_ans.png" alt="properties icon"></p>

<p>Your scene should now look like this:</p>

<p><img src="./gui_shots/stim_complete.png" alt="image path"></p>

<p>Let&#39;s do it! Click <img src="./gui_shots/run.png" alt="Drawing" style="width: 20px;"/></p>

<h2 id="toc_3">Using the Pandas library to explore the data</h2>

<p><strong>Learning objectives:</strong></p>

<ul>
<li>Use shell commands to navigate to the data folder</li>
<li>Import Psychopy data into the Jupyter Notebook</li>
<li>Generate descriptive statistics</li>
<li>Plot some comparisons by grouping data </li>
</ul>

<p>We will set up the notebook and load the additional software library we will need  - &quot;Pandas&quot;.</p>

<div><pre><code class="language-none">import pandas as pd</code></pre></div>

<p>The Jupyter Notebook understands shell commands as well, we&#39;ll use this to find our data. We&#39;ll use the exclamation mark to signal that what follows is a shell command rather than Python code.</p>

<div><pre><code class="language-none"># print working directory 
!pwd

/Users/talithaford/Dropbox/Conference-Workshop/ResBaz/2016/psychopy_lesson



# list files in &#39;data/&#39;
!ls data/

tf1_visneuro_2016_Feb_02_1234.csv    tf_visneuro_2016_Feb_02_1218.psydat
tf1_visneuro_2016_Feb_02_1234.log    tf_visneuro_2016_Feb_02_1233.csv
tf1_visneuro_2016_Feb_02_1234.psydat tf_visneuro_2016_Feb_02_1233.log
tf_visneuro_2016_Feb_02_1218.csv     tf_visneuro_2016_Feb_02_1233.psydat
tf_visneuro_2016_Feb_02_1218.log</code></pre></div>

<p>We can use the &#39;read_csv&#39; function of Pandas to read the datafile into a pandas DataFrame. A DataFrame will look familiar to anyone who has used Excel or SPSS.</p>

<div><pre><code class="language-none"># read the csv
df = pd.read_csv(&#39;data/tf1_visneuro_2016_Feb_02_1234.csv&#39;)
# print the first 5 lines of the DataFrame
df.head()</code></pre></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>correct_ans</th>
      <th>images</th>
      <th>type_of_image</th>
      <th>loop.thisRepN</th>
      <th>loop.thisTrialN</th>
      <th>loop.thisN</th>
      <th>loop.thisIndex</th>
      <th>key_resp_3.keys</th>
      <th>key_resp_3.corr</th>
      <th>key_resp_3.rt</th>
      <th>date</th>
      <th>frameRate</th>
      <th>expName</th>
      <th>session</th>
      <th>participant</th>
      <th>Unnamed: 15</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>up</td>
      <td>images/egg_hog.jpeg</td>
      <td>hog</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>up</td>
      <td>1</td>
      <td>0.633549</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>right</td>
      <td>images/cat_eyes.jpeg</td>
      <td>cat</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>right</td>
      <td>1</td>
      <td>0.550386</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>left</td>
      <td>images/gorilla_tongue.jpeg</td>
      <td>gorilla</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>left</td>
      <td>1</td>
      <td>0.600392</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>up</td>
      <td>images/santa_hog.jpeg</td>
      <td>hog</td>
      <td>0</td>
      <td>3</td>
      <td>3</td>
      <td>9</td>
      <td>up</td>
      <td>1</td>
      <td>0.600248</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>right</td>
      <td>images/ear_muffs_cat.jpeg</td>
      <td>cat</td>
      <td>0</td>
      <td>4</td>
      <td>4</td>
      <td>4</td>
      <td>right</td>
      <td>1</td>
      <td>0.749853</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<div><pre><code class="language-none"># drop the first row (under the header)
# the inplace option allows us to makes changes to the dataframe directly 
# rather than having to save the output to another variable
df.drop(0, inplace=True)
df.head()</code></pre></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>correct_ans</th>
      <th>images</th>
      <th>type_of_image</th>
      <th>loop.thisRepN</th>
      <th>loop.thisTrialN</th>
      <th>loop.thisN</th>
      <th>loop.thisIndex</th>
      <th>key_resp_3.keys</th>
      <th>key_resp_3.corr</th>
      <th>key_resp_3.rt</th>
      <th>date</th>
      <th>frameRate</th>
      <th>expName</th>
      <th>session</th>
      <th>participant</th>
      <th>Unnamed: 15</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>right</td>
      <td>images/cat_eyes.jpeg</td>
      <td>cat</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>right</td>
      <td>1</td>
      <td>0.550386</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>left</td>
      <td>images/gorilla_tongue.jpeg</td>
      <td>gorilla</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>left</td>
      <td>1</td>
      <td>0.600392</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>up</td>
      <td>images/santa_hog.jpeg</td>
      <td>hog</td>
      <td>0</td>
      <td>3</td>
      <td>3</td>
      <td>9</td>
      <td>up</td>
      <td>1</td>
      <td>0.600248</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>right</td>
      <td>images/ear_muffs_cat.jpeg</td>
      <td>cat</td>
      <td>0</td>
      <td>4</td>
      <td>4</td>
      <td>4</td>
      <td>right</td>
      <td>1</td>
      <td>0.749853</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>up</td>
      <td>images/marshmallow_hog.jpeg</td>
      <td>hog</td>
      <td>0</td>
      <td>5</td>
      <td>5</td>
      <td>8</td>
      <td>up</td>
      <td>1</td>
      <td>0.766511</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<div><pre><code class="language-none"># drop all colums with NA&#39;s
df.dropna(axis=1, inplace=True, how=&#39;all&#39;)
df.head()</code></pre></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>correct_ans</th>
      <th>images</th>
      <th>type_of_image</th>
      <th>loop.thisRepN</th>
      <th>loop.thisTrialN</th>
      <th>loop.thisN</th>
      <th>loop.thisIndex</th>
      <th>key_resp_3.keys</th>
      <th>key_resp_3.corr</th>
      <th>key_resp_3.rt</th>
      <th>date</th>
      <th>frameRate</th>
      <th>expName</th>
      <th>session</th>
      <th>participant</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>right</td>
      <td>images/cat_eyes.jpeg</td>
      <td>cat</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>right</td>
      <td>1</td>
      <td>0.550386</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>left</td>
      <td>images/gorilla_tongue.jpeg</td>
      <td>gorilla</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>left</td>
      <td>1</td>
      <td>0.600392</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>up</td>
      <td>images/santa_hog.jpeg</td>
      <td>hog</td>
      <td>0</td>
      <td>3</td>
      <td>3</td>
      <td>9</td>
      <td>up</td>
      <td>1</td>
      <td>0.600248</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>right</td>
      <td>images/ear_muffs_cat.jpeg</td>
      <td>cat</td>
      <td>0</td>
      <td>4</td>
      <td>4</td>
      <td>4</td>
      <td>right</td>
      <td>1</td>
      <td>0.749853</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>up</td>
      <td>images/marshmallow_hog.jpeg</td>
      <td>hog</td>
      <td>0</td>
      <td>5</td>
      <td>5</td>
      <td>8</td>
      <td>up</td>
      <td>1</td>
      <td>0.766511</td>
      <td>2016_Feb_02_1234</td>
      <td>60.205465</td>
      <td>visneuro</td>
      <td>1</td>
      <td>tf1</td>
    </tr>
  </tbody>
</table>
</div>

<div><pre><code class="language-none"># save out new dataframe as csv
df.to_csv(&#39;data/ID001.csv&#39;, index=False)

# to read back in you can use:
#df = pd.read_csv(&#39;data/ID001.csv&#39;)</code></pre></div>

<h2 id="toc_4">Visualising the data</h2>

<p>**Now that we have cleaned the data, it might be helpful to visualise it.<br>
To do this we need to import some packages. **</p>

<p><strong>Matplotlib</strong> is a Python library that produces quality figures and graphs from data.<br>
<strong>Seaborn</strong> is a Python library based on matplotlib, which provides additional graphical modifications for matplotlib figures and graphs.</p>

<div><pre><code class="language-none">import matplotlib as mpl
import matplotlib.pyplot as plt
import seaborn as sns # seaborn 

# to see the plots in the workspace we use:
%matplotlib inline

# these are seaborn commands, they are used for asthetics
sns.set_color_codes()
sns.set_style(&#39;whitegrid&#39;)</code></pre></div>

<p>Create a basic plot of all the columns</p>

<div><pre><code class="language-none">df.plot()

&lt;matplotlib.axes._subplots.AxesSubplot at 0x109768b50&gt;</code></pre></div>

<p><img src="output_16_1.png" alt="png"></p>

<p>The plot is good, but it doesn&#39;t actually tell us much.<br>
Let&#39;s used the package matplotlib.pyplot (&#39;plt&#39;), but first, find out what the function &#39;plot&#39; in the package does.</p>

<div><pre><code class="language-none">plt.plot?</code></pre></div>

<p>To plot a single column (e.g. reaction time), enter the name of the column (the header) as a <strong>string</strong> in square brackets immediately following the dataframe label as shown below. The column header is the &#39;index&#39; for that column. In this example, the plot will include the legend.</p>

<div><pre><code class="language-none">df[&#39;key_resp_3.rt&#39;].plot(legend=True)

&lt;matplotlib.axes._subplots.AxesSubplot at 0x109d68cd0&gt;</code></pre></div>

<p><img src="output_20_1.png" alt="png"></p>

<p>Seaborn (sns) has a nice distribution plot to visualise whether the responses are normally disributed.</p>

<div><pre><code class="language-none">sns.distplot(df[&#39;key_resp_3.rt&#39;])

&lt;matplotlib.axes._subplots.AxesSubplot at 0x109d9de10&gt;</code></pre></div>

<p><img src="output_22_1.png" alt="png"></p>

<p>It is clear from the graphs that the first answer is much longer than the rest of the answers. This is more likely due to it being the first response and therefore it isn&#39;t real data. We should filter it out so it doesn&#39;t overly affect the result.</p>

<div><pre><code class="language-none">df_clean = df[df[&#39;key_resp_3.rt&#39;] &lt; .9]

sns.distplot(df_clean[&#39;key_resp_3.rt&#39;])

&lt;matplotlib.axes._subplots.AxesSubplot at 0x109e5f650&gt;</code></pre></div>

<p><img src="output_25_1.png" alt="png"></p>

<p>It&#39;s still not looking particularly normal but better. Maybe less than 0.3 would be better still...  </p>

<p>We can plot the reaction time by the type of image by including the column name &#39;type<u>of</u>image&#39; in parentheses before the index.</p>

<div><pre><code class="language-none">df_clean.groupby(&#39;type_of_image&#39;)[&#39;key_resp_3.rt&#39;].plot(legend=True)

type_of_image
cat        Axes(0.125,0.125;0.775x0.775)
gorilla    Axes(0.125,0.125;0.775x0.775)
hog        Axes(0.125,0.125;0.775x0.775)
Name: key_resp_3.rt, dtype: object</code></pre></div>

<p><img src="output_27_1.png" alt="png"></p>

<p>Creating a variable that groups reation time by the animal type gives some more functionality</p>

<div><pre><code class="language-none">animal_type_group = df_clean.groupby(&#39;type_of_image&#39;)[&#39;key_resp_3.rt&#39;]


# then we can plot that variable
animal_type_group.plot(legend = True)

type_of_image
cat        Axes(0.125,0.125;0.775x0.775)
gorilla    Axes(0.125,0.125;0.775x0.775)
hog        Axes(0.125,0.125;0.775x0.775)
Name: key_resp_4.rt, dtype: object</code></pre></div>

<p><img src="output_30_1.png" alt="png"></p>

<p>This doesn&#39;t tell us much, but we can now print out the statistics for that variable.</p>

<div><pre><code class="language-none">animal_type_group.mean()

type_of_image
cat        0.653995
gorilla    0.639744
hog        0.634237
Name: key_resp_3.rt, dtype: float64

print(&#39;Mean: &#39;,animal_type_group.mean())
print(&#39;SD: &#39;,animal_type_group.std())

(&#39;Mean: &#39;, type_of_image
cat        0.653995
gorilla    0.639744
hog        0.634237
Name: key_resp_3.rt, dtype: float64)
(&#39;SD: &#39;, type_of_image
cat        0.084515
gorilla    0.068218
hog        0.086569
Name: key_resp_3.rt, dtype: float64)</code></pre></div>

<p>We can also visualise the reaction time by the type of image as a boxplot</p>

<div><pre><code class="language-none">df_clean.boxplot(&#39;key_resp_3.rt&#39;,by = &#39;type_of_image&#39;,)

&lt;matplotlib.axes._subplots.AxesSubplot at 0x10a165690&gt;</code></pre></div>

<p><img src="output_35_1.png" alt="png"></p>

<p>and save plot to the current working directory</p>

<div><pre><code class="language-none">plt.savefig(&#39;ID001_boxplot.png&#39;)


&lt;matplotlib.figure.Figure at 0x10a87a390&gt;</code></pre></div>

<script type="text/javascript">
var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=_self.Prism={util:{encode:function(e){return e instanceof n?new n(e.type,t.util.encode(e.content),e.alias):"Array"===t.util.type(e)?e.map(t.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=t.util.clone(e[r]));return a;case"Array":return e.map&&e.map(function(e){return t.util.clone(e)})}return e}},languages:{extend:function(e,n){var a=t.util.clone(t.languages[e]);for(var r in n)a[r]=n[r];return a},insertBefore:function(e,n,a,r){r=r||t.languages;var l=r[e];if(2==arguments.length){a=arguments[1];for(var i in a)a.hasOwnProperty(i)&&(l[i]=a[i]);return l}var o={};for(var s in l)if(l.hasOwnProperty(s)){if(s==n)for(var i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);o[s]=l[s]}return t.languages.DFS(t.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,n,a,r){r=r||{};for(var l in e)e.hasOwnProperty(l)&&(n.call(e,l,e[l],a||l),"Object"!==t.util.type(e[l])||r[e[l]]?"Array"!==t.util.type(e[l])||r[e[l]]||(r[e[l]]=!0,t.languages.DFS(e[l],n,l,r)):(r[e[l]]=!0,t.languages.DFS(e[l],n,null,r)))}},plugins:{},highlightAll:function(e,n){for(var a,r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),l=0;a=r[l++];)t.highlightElement(a,e===!0,n)},highlightElement:function(n,a,r){for(var l,i,o=n;o&&!e.test(o.className);)o=o.parentNode;o&&(l=(o.className.match(e)||[,""])[1],i=t.languages[l]),n.className=n.className.replace(e,"").replace(/\s+/g," ")+" language-"+l,o=n.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,"").replace(/\s+/g," ")+" language-"+l);var s=n.textContent,u={element:n,language:l,grammar:i,code:s};if(!s||!i)return t.hooks.run("complete",u),void 0;if(t.hooks.run("before-highlight",u),a&&_self.Worker){var g=new Worker(t.filename);g.onmessage=function(e){u.highlightedCode=e.data,t.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),t.hooks.run("after-highlight",u),t.hooks.run("complete",u)},g.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=t.highlight(u.code,u.grammar,u.language),t.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(n),t.hooks.run("after-highlight",u),t.hooks.run("complete",u)},highlight:function(e,a,r){var l=t.tokenize(e,a);return n.stringify(t.util.encode(l),r)},tokenize:function(e,n){var a=t.Token,r=[e],l=n.rest;if(l){for(var i in l)n[i]=l[i];delete n.rest}e:for(var i in n)if(n.hasOwnProperty(i)&&n[i]){var o=n[i];o="Array"===t.util.type(o)?o:[o];for(var s=0;s<o.length;++s){var u=o[s],g=u.inside,c=!!u.lookbehind,f=0,h=u.alias;u=u.pattern||u;for(var p=0;p<r.length;p++){var d=r[p];if(r.length>e.length)break e;if(!(d instanceof a)){u.lastIndex=0;var m=u.exec(d);if(m){c&&(f=m[1].length);var y=m.index-1+f,m=m[0].slice(f),v=m.length,k=y+v,b=d.slice(0,y+1),w=d.slice(k+1),P=[p,1];b&&P.push(b);var A=new a(i,g?t.tokenize(m,g):m,h);P.push(A),w&&P.push(w),Array.prototype.splice.apply(r,P)}}}}}return r},hooks:{all:{},add:function(e,n){var a=t.hooks.all;a[e]=a[e]||[],a[e].push(n)},run:function(e,n){var a=t.hooks.all[e];if(a&&a.length)for(var r,l=0;r=a[l++];)r(n)}}},n=t.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(n.stringify=function(e,a,r){if("string"==typeof e)return e;if("Array"===t.util.type(e))return e.map(function(t){return n.stringify(t,a,e)}).join("");var l={type:e.type,content:n.stringify(e.content,a,r),tag:"span",classes:["token",e.type],attributes:{},language:a,parent:r};if("comment"==l.type&&(l.attributes.spellcheck="true"),e.alias){var i="Array"===t.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(l.classes,i)}t.hooks.run("wrap",l);var o="";for(var s in l.attributes)o+=(o?" ":"")+s+'="'+(l.attributes[s]||"")+'"';return"<"+l.tag+' class="'+l.classes.join(" ")+'" '+o+">"+l.content+"</"+l.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(e){var n=JSON.parse(e.data),a=n.language,r=n.code,l=n.immediateClose;_self.postMessage(t.highlight(r,t.languages[a],a)),l&&_self.close()},!1),_self.Prism):_self.Prism;var a=document.getElementsByTagName("script");return a=a[a.length-1],a&&(t.filename=a.src,document.addEventListener&&!a.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);
</script>
<script type="text/x-mathjax-config">
if (typeof MathJaxListener !== 'undefined') {
  MathJax.Hub.Register.StartupHook('End', function () {
    MathJaxListener.invokeCallbackForKey_('End');
  });
}
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

</html>
